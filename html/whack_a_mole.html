<!DOCTYPE html>
<html lang="fr">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Whack-a-Mole Deluxe</title>
  <style>
    :root {
      --bg: #071021;
      --accent: #ff4fcc;
      --accent2: #19f0ff;
      --glass: rgba(255, 255, 255, 0.05)
    }

    html,
    body {
      height: 100%;
      margin: 0;
      font-family: 'Inter', sans-serif;
      background: radial-gradient(circle at center, #0f1a2b 0%, #071021 100%);
      color: #fff;
      overflow: hidden
    }

    .container {
      max-width: 800px;
      margin: 0 auto;
      height: 100%;
      display: flex;
      flex-direction: column;
      justify-content: center;
      padding: 20px;
      box-sizing: border-box
    }

    header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px
    }

    h1 {
      margin: 0;
      font-size: 2rem;
      background: linear-gradient(to right, #ff4fcc, #19f0ff);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent
    }

    .hud {
      display: flex;
      gap: 20px;
      margin-bottom: 20px;
      background: var(--glass);
      padding: 15px;
      border-radius: 12px;
      backdrop-filter: blur(5px);
      justify-content: space-around
    }

    .stat-label {
      font-size: 0.8rem;
      text-transform: uppercase;
      opacity: 0.7
    }

    .stat-val {
      font-size: 1.5rem;
      font-weight: 700
    }

    .board {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 20px;
      perspective: 1000px
    }

    .hole {
      background: rgba(0, 0, 0, 0.3);
      border-radius: 50%;
      height: 140px;
      position: relative;
      overflow: hidden;
      box-shadow: inset 0 10px 20px rgba(0, 0, 0, 0.5);
      cursor: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24"><path fill="%23fff" d="M2 2l20 20M22 2L2 22"/></svg>'), auto;
      /* Simple crosshair fallback */
    }

    .hole::after {
      content: '';
      position: absolute;
      bottom: -10px;
      left: 5%;
      width: 90%;
      height: 20px;
      background: rgba(0, 0, 0, 0.5);
      border-radius: 50%;
      filter: blur(4px);
    }

    .mole {
      width: 100px;
      height: 100px;
      background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><circle cx="50" cy="50" r="45" fill="%23ffcf8a"/><circle cx="35" cy="40" r="5" fill="%23000"/><circle cx="65" cy="40" r="5" fill="%23000"/><path d="M40 70 Q50 80 60 70" stroke="%23000" stroke-width="3" fill="none"/></svg>') no-repeat center;
      position: absolute;
      left: 50%;
      bottom: -100%;
      transform: translateX(-50%);
      transition: bottom 0.2s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    }

    .mole.up {
      bottom: 10px
    }

    .mole.hit {
      filter: brightness(0.5) sepia(1) hue-rotate(-50deg) saturate(5);
      transform: translateX(-50%) scale(0.9)
    }

    .btn {
      background: var(--accent);
      border: 0;
      padding: 12px 32px;
      border-radius: 30px;
      font-weight: 800;
      font-size: 1.1rem;
      cursor: pointer;
      color: #071021;
      box-shadow: 0 0 20px rgba(255, 79, 204, 0.4);
      transition: 0.2s
    }

    .btn:hover {
      transform: scale(1.05)
    }

    .overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.8);
      backdrop-filter: blur(10px);
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      z-index: 100;
      opacity: 0;
      pointer-events: none;
      transition: 0.3s
    }

    .overlay.active {
      opacity: 1;
      pointer-events: auto
    }

    /* Hammer cursor custom */
    body {
      cursor: crosshair;
    }
  </style>
</head>

<body>

  <div class="container">
    <header>
      <h1>Whack-a-Mole</h1>
      <a href="../index.html" style="color:rgba(255,255,255,0.6);text-decoration:none">Exit</a>
    </header>

    <div class="hud">
      <div>
        <div class="stat-label">Score</div>
        <div class="stat-val" id="score">0</div>
      </div>
      <div>
        <div class="stat-label">Time</div>
        <div class="stat-val" id="time">30</div>
      </div>
    </div>

    <div class="board">
      <div class="hole">
        <div class="mole"></div>
      </div>
      <div class="hole">
        <div class="mole"></div>
      </div>
      <div class="hole">
        <div class="mole"></div>
      </div>
      <div class="hole">
        <div class="mole"></div>
      </div>
      <div class="hole">
        <div class="mole"></div>
      </div>
      <div class="hole">
        <div class="mole"></div>
      </div>
      <div class="hole">
        <div class="mole"></div>
      </div>
      <div class="hole">
        <div class="mole"></div>
      </div>
      <div class="hole">
        <div class="mole"></div>
      </div>
    </div>
  </div>

  <div class="overlay active" id="menu">
    <h1 style="font-size:3rem;margin-bottom:10px">Ready?</h1>
    <p style="color:rgba(255,255,255,0.7);margin-bottom:30px">Hit the moles. Don't miss.</p>
    <button class="btn" onclick="startGame()">START</button>
  </div>

  <script>
    const holes = document.querySelectorAll('.hole');
    const scoreEl = document.getElementById('score');
    const timeEl = document.getElementById('time');
    const menu = document.getElementById('menu');

    let lastHole;
    let timeUp = false;
    let score = 0;
    let timeLeft = 30;

    function randomTime(min, max) {
      return Math.round(Math.random() * (max - min) + min);
    }

    function randomHole(holes) {
      const idx = Math.floor(Math.random() * holes.length);
      const hole = holes[idx];
      if (hole === lastHole) return randomHole(holes);
      lastHole = hole;
      return hole;
    }

    function peep() {
      const time = randomTime(400, 1000);
      const hole = randomHole(holes);
      const mole = hole.querySelector('.mole');

      mole.classList.add('up');
      mole.classList.remove('hit');

      setTimeout(() => {
        mole.classList.remove('up');
        if (!timeUp) peep();
      }, time);
    }

    function startGame() {
      menu.classList.remove('active');
      scoreEl.textContent = 0;
      timeEl.textContent = 30;
      score = 0;
      timeLeft = 30;
      timeUp = false;

      peep();

      let timer = setInterval(() => {
        timeLeft--;
        timeEl.textContent = timeLeft;
        if (timeLeft <= 0) {
          clearInterval(timer);
          timeUp = true;
          menu.querySelector('h1').textContent = "TIME'S UP!";
          menu.querySelector('p').textContent = "Final Score: " + score;
          menu.querySelector('button').textContent = "PLAY AGAIN";
          menu.classList.add('active');
        }
      }, 1000);
    }

    function bonk(e) {
      if (!e.isTrusted) return; // cheater!
      const mole = this.querySelector('.mole');
      if (!mole.classList.contains('up')) return;
      if (mole.classList.contains('hit')) return;

      score++;
      mole.classList.remove('up');
      mole.classList.add('hit');
      scoreEl.textContent = score;

      // Visual feedback
      const spark = document.createElement('div');
      spark.style.position = 'absolute';
      spark.style.left = e.clientX + 'px';
      spark.style.top = e.clientY + 'px';
      spark.style.width = '10px'; spark.style.height = '10px';
      spark.style.background = '#fff';
      spark.style.borderRadius = '50%';
      spark.style.pointerEvents = 'none';
      spark.style.boxShadow = '0 0 10px #fff';
      document.body.appendChild(spark);

      spark.animate([
        { transform: 'scale(1)', opacity: 1 },
        { transform: 'scale(3)', opacity: 0 }
      ], { duration: 200 }).onfinish = () => spark.remove();
    }

    holes.forEach(hole => hole.addEventListener('mousedown', bonk));

  </script>
</body>

</html>